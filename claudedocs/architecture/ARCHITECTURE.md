# í†µí•© ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ & íŒŒì¼ ê´€ë¦¬ ì‹œìŠ¤í…œ - ì•„í‚¤í…ì²˜

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Client Layer                          â”‚
â”‚                   React + WebSocket Client                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     API Gateway Layer                        â”‚
â”‚                        FastAPI                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  REST API    â”‚  â”‚  WebSocket   â”‚  â”‚  Auth        â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚              â”‚              â”‚
          â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Supabase   â”‚ â”‚   PostgreSQL â”‚ â”‚    Redis     â”‚
â”‚     Auth     â”‚ â”‚   (SQLite)   â”‚ â”‚   Caching    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚    MinIO     â”‚
                 â”‚Object Storageâ”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—‚ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
claude-code-playground/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ v1/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ endpoints/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ courses.py
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ channels.py
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ messages.py
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ files.py
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notifications.py
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ users.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ api.py
â”‚   â”‚   â”‚   â””â”€â”€ deps.py
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py
â”‚   â”‚   â”‚   â”œâ”€â”€ security.py
â”‚   â”‚   â”‚   â””â”€â”€ database.py
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”‚   â”œâ”€â”€ course.py
â”‚   â”‚   â”‚   â”œâ”€â”€ channel.py
â”‚   â”‚   â”‚   â”œâ”€â”€ message.py
â”‚   â”‚   â”‚   â”œâ”€â”€ file.py
â”‚   â”‚   â”‚   â””â”€â”€ notification.py
â”‚   â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”‚   â”œâ”€â”€ course.py
â”‚   â”‚   â”‚   â”œâ”€â”€ channel.py
â”‚   â”‚   â”‚   â”œâ”€â”€ message.py
â”‚   â”‚   â”‚   â”œâ”€â”€ file.py
â”‚   â”‚   â”‚   â””â”€â”€ notification.py
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ message_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ file_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ notification_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ cache_service.py
â”‚   â”‚   â”‚   â””â”€â”€ storage_service.py
â”‚   â”‚   â”œâ”€â”€ websocket/
â”‚   â”‚   â”‚   â”œâ”€â”€ connection_manager.py
â”‚   â”‚   â”‚   â””â”€â”€ handlers.py
â”‚   â”‚   â””â”€â”€ main.py
â”‚   â”œâ”€â”€ alembic/
â”‚   â”‚   â””â”€â”€ versions/
â”‚   â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ alembic.ini
â”‚   â””â”€â”€ .env.example
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”‚   â”œâ”€â”€ files/
â”‚   â”‚   â”‚   â”œâ”€â”€ notifications/
â”‚   â”‚   â”‚   â””â”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Course.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Chat.jsx
â”‚   â”‚   â”‚   â””â”€â”€ Files.jsx
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ api.js
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”‚   â”œâ”€â”€ websocket.js
â”‚   â”‚   â”‚   â””â”€â”€ storage.js
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â””â”€â”€ index.jsx
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .env.example
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”œâ”€â”€ docker-compose.dev.yml
â”‚   â”œâ”€â”€ Dockerfile.backend
â”‚   â””â”€â”€ Dockerfile.frontend
â””â”€â”€ README.md
```

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### Users (Supabase Auth ì—°ë™)
```sql
-- Supabaseì—ì„œ ê´€ë¦¬ë˜ëŠ” auth.users í…Œì´ë¸”ê³¼ ì—°ë™
-- ì¶”ê°€ ì‚¬ìš©ì ì •ë³´ë§Œ local DBì— ì €ì¥
CREATE TABLE user_profiles (
    id UUID PRIMARY KEY REFERENCES auth.users(id),
    username VARCHAR(50) UNIQUE NOT NULL,
    display_name VARCHAR(100),
    avatar_url TEXT,
    bio TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### Courses (ê°•ì¢Œ)
```sql
CREATE TABLE courses (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(200) NOT NULL,
    description TEXT,
    code VARCHAR(50) UNIQUE,
    instructor_id UUID REFERENCES user_profiles(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN DEFAULT true
);
```

### Course Members (ê°•ì¢Œ ë©¤ë²„ì‹­)
```sql
CREATE TABLE course_members (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
    user_id UUID REFERENCES user_profiles(id) ON DELETE CASCADE,
    role VARCHAR(20) NOT NULL, -- 'instructor', 'assistant', 'student'
    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(course_id, user_id)
);

CREATE INDEX idx_course_members_course ON course_members(course_id);
CREATE INDEX idx_course_members_user ON course_members(user_id);
```

### Channels (ì±„ë„/ì±„íŒ…ë°©)
```sql
CREATE TABLE channels (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    type VARCHAR(20) NOT NULL, -- 'public', 'private', 'dm'
    created_by UUID REFERENCES user_profiles(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_archived BOOLEAN DEFAULT false
);

CREATE INDEX idx_channels_course ON channels(course_id);
```

### Messages (ë©”ì‹œì§€)
```sql
CREATE TABLE messages (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    channel_id UUID REFERENCES channels(id) ON DELETE CASCADE,
    user_id UUID REFERENCES user_profiles(id),
    content TEXT NOT NULL,
    parent_message_id UUID REFERENCES messages(id), -- ìŠ¤ë ˆë“œ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_edited BOOLEAN DEFAULT false,
    is_deleted BOOLEAN DEFAULT false,
    is_pinned BOOLEAN DEFAULT false
);

CREATE INDEX idx_messages_channel ON messages(channel_id, created_at DESC);
CREATE INDEX idx_messages_parent ON messages(parent_message_id);
CREATE INDEX idx_messages_pinned ON messages(channel_id, is_pinned) WHERE is_pinned = true;
```

### Message Reactions (ë©”ì‹œì§€ ë°˜ì‘)
```sql
CREATE TABLE message_reactions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    message_id UUID REFERENCES messages(id) ON DELETE CASCADE,
    user_id UUID REFERENCES user_profiles(id),
    emoji VARCHAR(50) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(message_id, user_id, emoji)
);

CREATE INDEX idx_reactions_message ON message_reactions(message_id);
```

### Mentions (ë©˜ì…˜)
```sql
CREATE TABLE mentions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    message_id UUID REFERENCES messages(id) ON DELETE CASCADE,
    user_id UUID REFERENCES user_profiles(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_read BOOLEAN DEFAULT false,
    UNIQUE(message_id, user_id)
);

CREATE INDEX idx_mentions_user ON mentions(user_id, is_read);
```

### Files (íŒŒì¼)
```sql
CREATE TABLE files (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
    folder_id UUID REFERENCES folders(id),
    uploaded_by UUID REFERENCES user_profiles(id),
    original_name VARCHAR(255) NOT NULL,
    stored_name VARCHAR(255) NOT NULL,
    file_path TEXT NOT NULL,
    file_size BIGINT NOT NULL,
    mime_type VARCHAR(100),
    version INT DEFAULT 1,
    parent_file_id UUID REFERENCES files(id), -- ë²„ì „ ê´€ë¦¬
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT false
);

CREATE INDEX idx_files_course ON files(course_id);
CREATE INDEX idx_files_folder ON files(folder_id);
CREATE INDEX idx_files_parent ON files(parent_file_id);
```

### Folders (í´ë”)
```sql
CREATE TABLE folders (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
    parent_folder_id UUID REFERENCES folders(id),
    name VARCHAR(255) NOT NULL,
    created_by UUID REFERENCES user_profiles(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT false
);

CREATE INDEX idx_folders_course ON folders(course_id);
CREATE INDEX idx_folders_parent ON folders(parent_folder_id);
```

### File Tags (íŒŒì¼ íƒœê·¸)
```sql
CREATE TABLE file_tags (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    file_id UUID REFERENCES files(id) ON DELETE CASCADE,
    tag VARCHAR(50) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(file_id, tag)
);

CREATE INDEX idx_file_tags_tag ON file_tags(tag);
```

### Message Files (ë©”ì‹œì§€ì— ì²¨ë¶€ëœ íŒŒì¼)
```sql
CREATE TABLE message_files (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    message_id UUID REFERENCES messages(id) ON DELETE CASCADE,
    file_id UUID REFERENCES files(id) ON DELETE CASCADE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(message_id, file_id)
);
```

### Notifications (ì•Œë¦¼)
```sql
CREATE TABLE notifications (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES user_profiles(id) ON DELETE CASCADE,
    type VARCHAR(50) NOT NULL, -- 'mention', 'file_upload', 'assignment', 'announcement'
    title VARCHAR(255) NOT NULL,
    content TEXT,
    link TEXT,
    related_id UUID, -- ê´€ë ¨ ì—”í‹°í‹° ID (ìœ ì—°í•œ ì°¸ì¡°)
    is_read BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_notifications_user ON notifications(user_id, is_read, created_at DESC);
```

### Announcements (ê³µì§€ì‚¬í•­)
```sql
CREATE TABLE announcements (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
    channel_id UUID REFERENCES channels(id),
    created_by UUID REFERENCES user_profiles(id),
    title VARCHAR(255) NOT NULL,
    content TEXT NOT NULL,
    is_pinned BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_announcements_course ON announcements(course_id, created_at DESC);
```

### Assignments (ê³¼ì œ)
```sql
CREATE TABLE assignments (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
    created_by UUID REFERENCES user_profiles(id),
    title VARCHAR(255) NOT NULL,
    description TEXT,
    instructions TEXT,
    start_date TIMESTAMP,
    due_date TIMESTAMP NOT NULL,
    late_submission_allowed BOOLEAN DEFAULT false,
    late_penalty_percent INTEGER DEFAULT 0,
    max_points FLOAT NOT NULL DEFAULT 100.0,
    rubric JSON, -- ì±„ì  ê¸°ì¤€
    allow_resubmission BOOLEAN DEFAULT false,
    show_solutions_after_due BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_published BOOLEAN DEFAULT false,
    is_deleted BOOLEAN DEFAULT false
);

CREATE INDEX idx_assignments_course ON assignments(course_id, due_date DESC);
```

### Submissions (ì œì¶œë¬¼)
```sql
CREATE TABLE submissions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    assignment_id UUID REFERENCES assignments(id) ON DELETE CASCADE,
    student_id UUID REFERENCES user_profiles(id),
    content TEXT,
    submission_text TEXT,
    submitted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_late BOOLEAN DEFAULT false,
    attempt_number INTEGER DEFAULT 1,
    status VARCHAR(20) DEFAULT 'submitted', -- submitted, graded, returned
    is_deleted BOOLEAN DEFAULT false
);

CREATE INDEX idx_submissions_assignment ON submissions(assignment_id);
CREATE INDEX idx_submissions_student ON submissions(student_id);
```

### Grades (í‰ê°€/ì„±ì )
```sql
CREATE TABLE grades (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    submission_id UUID REFERENCES submissions(id) ON DELETE CASCADE UNIQUE,
    graded_by UUID REFERENCES user_profiles(id),
    points FLOAT NOT NULL,
    max_points FLOAT NOT NULL,
    percentage FLOAT,
    letter_grade VARCHAR(5), -- A+, A, B+, etc.
    feedback TEXT,
    rubric_scores JSON, -- ì„¸ë¶€ ì±„ì  ë‚´ì—­
    graded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_released BOOLEAN DEFAULT false
);

CREATE INDEX idx_grades_submission ON grades(submission_id);
```

### Assignment Files (ê³¼ì œ ì²¨ë¶€ íŒŒì¼)
```sql
CREATE TABLE assignment_files (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    assignment_id UUID REFERENCES assignments(id) ON DELETE CASCADE,
    file_id UUID REFERENCES files(id) ON DELETE CASCADE,
    file_type VARCHAR(50) DEFAULT 'material', -- material, solution, rubric
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### Submission Files (ì œì¶œ íŒŒì¼)
```sql
CREATE TABLE submission_files (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    submission_id UUID REFERENCES submissions(id) ON DELETE CASCADE,
    file_id UUID REFERENCES files(id) ON DELETE CASCADE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„

### Authentication
- `POST /api/v1/auth/login` - Supabase í† í°ìœ¼ë¡œ ë¡œê·¸ì¸
- `POST /api/v1/auth/logout` - ë¡œê·¸ì•„ì›ƒ
- `GET /api/v1/auth/me` - í˜„ì¬ ì‚¬ìš©ì ì •ë³´

### Courses
- `GET /api/v1/courses` - ë‚´ ê°•ì¢Œ ëª©ë¡
- `POST /api/v1/courses` - ê°•ì¢Œ ìƒì„±
- `GET /api/v1/courses/{id}` - ê°•ì¢Œ ìƒì„¸
- `PUT /api/v1/courses/{id}` - ê°•ì¢Œ ìˆ˜ì •
- `DELETE /api/v1/courses/{id}` - ê°•ì¢Œ ì‚­ì œ
- `POST /api/v1/courses/{id}/members` - ë©¤ë²„ ì¶”ê°€
- `GET /api/v1/courses/{id}/members` - ë©¤ë²„ ëª©ë¡

### Channels
- `GET /api/v1/courses/{course_id}/channels` - ì±„ë„ ëª©ë¡
- `POST /api/v1/courses/{course_id}/channels` - ì±„ë„ ìƒì„±
- `GET /api/v1/channels/{id}` - ì±„ë„ ìƒì„¸
- `PUT /api/v1/channels/{id}` - ì±„ë„ ìˆ˜ì •
- `DELETE /api/v1/channels/{id}` - ì±„ë„ ì‚­ì œ

### Messages
- `GET /api/v1/channels/{channel_id}/messages` - ë©”ì‹œì§€ ëª©ë¡ (í˜ì´ì§€ë„¤ì´ì…˜)
- `POST /api/v1/channels/{channel_id}/messages` - ë©”ì‹œì§€ ì „ì†¡
- `GET /api/v1/messages/{id}` - ë©”ì‹œì§€ ìƒì„¸
- `PUT /api/v1/messages/{id}` - ë©”ì‹œì§€ ìˆ˜ì •
- `DELETE /api/v1/messages/{id}` - ë©”ì‹œì§€ ì‚­ì œ
- `POST /api/v1/messages/{id}/reactions` - ë¦¬ì•¡ì…˜ ì¶”ê°€
- `DELETE /api/v1/messages/{id}/reactions/{emoji}` - ë¦¬ì•¡ì…˜ ì œê±°
- `GET /api/v1/messages/{id}/thread` - ìŠ¤ë ˆë“œ ë©”ì‹œì§€ ëª©ë¡

### Files
- `GET /api/v1/courses/{course_id}/files` - íŒŒì¼ ëª©ë¡
- `POST /api/v1/courses/{course_id}/files` - íŒŒì¼ ì—…ë¡œë“œ
- `GET /api/v1/files/{id}` - íŒŒì¼ ì •ë³´
- `GET /api/v1/files/{id}/download` - íŒŒì¼ ë‹¤ìš´ë¡œë“œ
- `GET /api/v1/files/{id}/preview` - íŒŒì¼ ë¯¸ë¦¬ë³´ê¸°
- `DELETE /api/v1/files/{id}` - íŒŒì¼ ì‚­ì œ
- `GET /api/v1/files/{id}/versions` - íŒŒì¼ ë²„ì „ ëª©ë¡
- `POST /api/v1/files/{id}/tags` - íƒœê·¸ ì¶”ê°€

### Folders
- `GET /api/v1/courses/{course_id}/folders` - í´ë” ëª©ë¡
- `POST /api/v1/courses/{course_id}/folders` - í´ë” ìƒì„±
- `PUT /api/v1/folders/{id}` - í´ë” ìˆ˜ì •
- `DELETE /api/v1/folders/{id}` - í´ë” ì‚­ì œ

### Notifications
- `GET /api/v1/notifications` - ì•Œë¦¼ ëª©ë¡
- `PUT /api/v1/notifications/{id}/read` - ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬
- `PUT /api/v1/notifications/read-all` - ëª¨ë“  ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬

### Assignments
- `GET /api/v1/assignments?course_id={id}` - ê³¼ì œ ëª©ë¡
- `POST /api/v1/assignments` - ê³¼ì œ ìƒì„±
- `GET /api/v1/assignments/{id}` - ê³¼ì œ ìƒì„¸
- `PUT /api/v1/assignments/{id}` - ê³¼ì œ ìˆ˜ì •
- `DELETE /api/v1/assignments/{id}` - ê³¼ì œ ì‚­ì œ
- `GET /api/v1/assignments/{id}/stats` - ê³¼ì œ í†µê³„ (ì œì¶œ/ì±„ì  í˜„í™©)

### Submissions
- `POST /api/v1/assignments/{id}/submissions` - ê³¼ì œ ì œì¶œ
- `GET /api/v1/assignments/{id}/submissions` - ì œì¶œ ëª©ë¡ (êµìˆ˜/ì¡°êµ)
- `GET /api/v1/assignments/{id}/my-submission` - ë‚´ ì œì¶œ í™•ì¸

### Grading
- `POST /api/v1/assignments/submissions/{id}/grade` - ì±„ì í•˜ê¸°
- `PUT /api/v1/assignments/submissions/{id}/grade` - ì±„ì  ìˆ˜ì •
- `GET /api/v1/assignments/submissions/{id}/grade` - ì±„ì  ê²°ê³¼ ì¡°íšŒ

### WebSocket
- `WS /ws/{course_id}` - ê°•ì¢Œë³„ ì‹¤ì‹œê°„ í†µì‹ 

## ğŸ” ê¶Œí•œ ì‹œìŠ¤í…œ

### ì—­í•  (Roles)
- **instructor** (êµìˆ˜): ëª¨ë“  ê¶Œí•œ
- **assistant** (ì¡°êµ): ì½ê¸° + ì œí•œì  ì“°ê¸°
- **student** (í•™ìƒ): ì£¼ë¡œ ì½ê¸° ì „ìš©

### ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤

| ê¸°ëŠ¥ | Instructor | Assistant | Student |
|------|------------|-----------|---------|
| ê°•ì¢Œ ìƒì„±/ìˆ˜ì •/ì‚­ì œ | âœ… | âŒ | âŒ |
| ì±„ë„ ìƒì„±/ìˆ˜ì • | âœ… | âœ… | âŒ |
| ë©”ì‹œì§€ ì „ì†¡ | âœ… | âœ… | âœ… |
| íŒŒì¼ ì—…ë¡œë“œ (ê°•ì˜ìë£Œ) | âœ… | âœ… | âŒ |
| íŒŒì¼ ì—…ë¡œë“œ (ê³¼ì œ) | âœ… | âœ… | âœ… |
| íŒŒì¼ ë‹¤ìš´ë¡œë“œ | âœ… | âœ… | âœ… |
| ê³µì§€ ì‘ì„± | âœ… | âœ… | âŒ |
| ë©¤ë²„ ê´€ë¦¬ | âœ… | âœ… | âŒ |
| ê³¼ì œ ìƒì„±/ìˆ˜ì •/ì‚­ì œ | âœ… | âœ… | âŒ |
| ê³¼ì œ ì œì¶œ | âœ… | âœ… | âœ… |
| ê³¼ì œ ì±„ì  | âœ… | âœ… | âŒ |
| ì±„ì  ê²°ê³¼ ì¡°íšŒ (ë³¸ì¸) | âœ… | âœ… | âœ… (ê³µê°œëœ ê²ƒë§Œ) |
| ì±„ì  ê²°ê³¼ ì¡°íšŒ (ì „ì²´) | âœ… | âœ… | âŒ |

## ğŸš€ ì‹¤ì‹œê°„ ê¸°ëŠ¥ (WebSocket)

### ì´ë²¤íŠ¸ íƒ€ì…
```javascript
// Client â†’ Server
{
  "type": "message.send",
  "data": { "channel_id": "...", "content": "..." }
}

{
  "type": "message.typing",
  "data": { "channel_id": "..." }
}

// Server â†’ Client
{
  "type": "message.new",
  "data": { "id": "...", "content": "...", "user": {...} }
}

{
  "type": "message.update",
  "data": { "id": "...", "content": "..." }
}

{
  "type": "message.delete",
  "data": { "id": "..." }
}

{
  "type": "user.typing",
  "data": { "user_id": "...", "channel_id": "..." }
}

{
  "type": "notification.new",
  "data": { "id": "...", "title": "...", "content": "..." }
}
```

## ğŸ“¦ ìºì‹± ì „ëµ (Redis)

### ìºì‹œ í‚¤ íŒ¨í„´
```
user:profile:{user_id}             # ì‚¬ìš©ì í”„ë¡œí•„ (TTL: 1ì‹œê°„)
course:{course_id}                 # ê°•ì¢Œ ì •ë³´ (TTL: 1ì‹œê°„)
course:{course_id}:members         # ê°•ì¢Œ ë©¤ë²„ ëª©ë¡ (TTL: 30ë¶„)
channel:{channel_id}:messages      # ìµœê·¼ ë©”ì‹œì§€ (TTL: 10ë¶„)
notifications:{user_id}:unread     # ì½ì§€ ì•Šì€ ì•Œë¦¼ ìˆ˜ (TTL: 5ë¶„)
```

### ìºì‹œ ë¬´íš¨í™” ì „ëµ
- ë°ì´í„° ë³€ê²½ ì‹œ ê´€ë ¨ ìºì‹œ ì‚­ì œ
- Pub/Subìœ¼ë¡œ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ì— ë¬´íš¨í™” ì „íŒŒ

## ğŸ—‚ï¸ íŒŒì¼ ì €ì¥ êµ¬ì¡° (MinIO)

```
bucket: course-files
â”œâ”€â”€ {course_id}/
â”‚   â”œâ”€â”€ materials/        # ê°•ì˜ìë£Œ
â”‚   â”‚   â””â”€â”€ {file_id}/{version}/{filename}
â”‚   â”œâ”€â”€ assignments/      # ê³¼ì œ
â”‚   â”‚   â””â”€â”€ {file_id}/{version}/{filename}
â”‚   â”œâ”€â”€ submissions/      # ì œì¶œë¬¼
â”‚   â”‚   â””â”€â”€ {user_id}/{file_id}/{version}/{filename}
â”‚   â””â”€â”€ shared/           # ê³µìœ  íŒŒì¼
â”‚       â””â”€â”€ {file_id}/{version}/{filename}
```

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **ì¸ì¦**: Supabase JWT í† í° ê²€ì¦
2. **ê¶Œí•œ**: ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)
3. **íŒŒì¼ ì ‘ê·¼**: ì„œëª…ëœ URL ì‚¬ìš© (MinIO presigned URLs)
4. **Rate Limiting**: Redis ê¸°ë°˜ ì†ë„ ì œí•œ
5. **ì…ë ¥ ê²€ì¦**: Pydantic ìŠ¤í‚¤ë§ˆ ê²€ì¦
6. **XSS ë°©ì§€**: ë©”ì‹œì§€ ì»¨í…ì¸  sanitization
7. **CSRF ë³´í˜¸**: SameSite ì¿ í‚¤ ì„¤ì •

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

1. **ë°ì´í„°ë² ì´ìŠ¤**: ì ì ˆí•œ ì¸ë±ìŠ¤ ìƒì„±
2. **API**: í˜ì´ì§€ë„¤ì´ì…˜ ë° ì»¤ì„œ ê¸°ë°˜ ë¡œë”©
3. **ìºì‹±**: Redis í™œìš©í•œ ìì£¼ ì ‘ê·¼í•˜ëŠ” ë°ì´í„° ìºì‹±
4. **íŒŒì¼**: MinIO CDN ì—°ë™ ê³ ë ¤
5. **WebSocket**: ì±„ë„ë³„ ë£¸ ë¶„ë¦¬ë¡œ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìµœì í™”
6. **ì¿¼ë¦¬ ìµœì í™”**: N+1 ë¬¸ì œ í•´ê²° (eager loading)
